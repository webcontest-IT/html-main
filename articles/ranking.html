<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        let articlesData; // グローバル変数として定義

        async function loadArticlesData() {
            const response = await fetch('/assets/articles.json');
            articlesData = await response.json();
        }

        async function articles_json(value) {
            if (!articlesData) {
                await loadArticlesData();
            }
            const key = Object.keys(articlesData).find(key => articlesData[key] === parseInt(value));
            return key;
        }

        const list_rankig = [];
        const list_text = [];

        fetch('https://script.google.com/macros/s/AKfycbyDdSAGPG3I1d0TBkyfi0ZVyAG-fPswQI_7k9rM2rz2GJYZUM_lDbcNoAuQuA4ObybR/exec?mode=list')
        .then(response => response.json())
        .then(async data => {
                let textbox_element = document.getElementById('textbox');
                for (i of data["value"]) {
                    let new_element = document.createElement('p');
                    list_rankig.push(i[0]);
                    list_text.push(i[1]);

                }
                console.log(list_rankig,list_text);
                let ranking_json = '['; // JSON配列の開始部分を追加
                for (let i = 0; i < list_rankig.length-1; i++) {
                    ranking_json += `{"id":"${list_rankig[i]}","value":${list_text[i]}},`;
                }
                ranking_json += `{"id":"${list_rankig[list_rankig.length-1]}","value":${list_text[list_rankig.length-1]}}]`;
                console.log(JSON.parse(ranking_json));
                const items = JSON.parse(ranking_json);
                items.sort((a, b) => a.value - b.value);
                console.log(items);

        })
        .catch(error => console.error('Error:', error));

    </script>
</head>
<body>
    <p id="ranking_list"></p>
    <p id="favorite_list"></p>
</body>
</html>